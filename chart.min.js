const data = <?= json_encode($data) ?>;  // Fetch all data including domain, raw_score, weight_percent, etc.

function loadReport(type) {
  // Initialize the container
  const container = document.getElementById('reportContent');

  // Metric Names
  const domains = data.map(item => item.domain);
  const rawScores = data.map(item => item.raw_score);  // Raw Score (%)
  const weights = data.map(item => item.weight_percent);  // Weight (%)
  const contributions = data.map(item => item.contribution_percent);  // Contribution (%)

  // Set up the HTML content for the report
  container.innerHTML = `
    <h2>${type.charAt(0).toUpperCase() + type.slice(1)} Combined Report</h2>
    <div class="chart-grid">
      <div class="chart-box"><canvas id="chart1"></canvas></div>
      <div class="chart-box"><canvas id="chart2"></canvas></div>
    </div>
  `;

  // Doughnut Chart for Raw Score (%)
  new Chart(document.getElementById('chart1'), {
    type: 'doughnut',
    data: {
      labels: domains,  // Domain names
      datasets: [{
        data: rawScores,  // Raw scores for each domain
        backgroundColor: ['#001f3f', '#006400', '#808080', '#D3D3D3', '#4682B4', '#6A5ACD', '#32CD32', '#FFD700', '#FF6347', '#20B2AA']  // Adding more colors
      }]
    },
    options: { cutout: '60%' }  // Make it a doughnut chart
  });

  // Bar Chart for Weight (%)
  new Chart(document.getElementById('chart2'), {
    type: 'bar',
    data: {
      labels: domains,  // Domain names
      datasets: [{
        label: 'Weight (%)',
        data: weights,  // Weight for each domain
        backgroundColor: '#001f3f',  // Color for the bars
        barThickness: 25
      }]
    }
  });
}
